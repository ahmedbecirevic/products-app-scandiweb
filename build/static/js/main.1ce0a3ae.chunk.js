(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{103:function(e,t,c){"use strict";c.r(t);var n=c(57),a=c.n(n),o=(c(73),c(5)),r=c(0),i=c.n(r),s=i.a.createContext({products:[],listProdToDelete:[],deleteDisabled:function(e){},addProductToDelete:function(e){},removeProductFromDelete:function(e){},deleteProducts:function(){},addProducts:function(e){},addNewProduct:function(e){},removeProducts:function(){}}),d=c(58),u=c.n(d),l=c(1),j=function(e){return Object(l.jsx)("button",{onClick:e.onClick,className:"".concat(u.a.button," ").concat(e.className?e.className:""),id:e.id,disabled:e.disabled,type:e.type,children:e.children})},b=c(29),h=c(46),p=c.n(h),O=c(7),x=c(28),f=c.n(x),m=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),c=t[0],n=t[1],a="//localhost/products-app-scandiweb/api",i=Object(r.useContext)(s),d=Object(O.g)(),u=i.listProdToDelete,h=i.removeProducts,x=Object(r.useCallback)((function(){if(u.length>0){var e={SKU:u};n(!0),h(),f.a.post("".concat(a,"/products/delete"),e).then((function(){n(!1)})).catch((function(e){return console.log(e)}))}}),[a,u,h]);return Object(l.jsx)("nav",{className:p.a.nav,children:"/"===d.pathname&&Object(l.jsxs)("ul",{children:[Object(l.jsx)(b.b,{to:"/addproduct",children:Object(l.jsx)(j,{id:"add-product-btn",children:"ADD"})}),Object(l.jsx)(j,{id:"delete-product-btn",disabled:c,onClick:x,className:p.a["delete-product-btn"],children:"MASS DELETE"})]})})},v=c(60),g=c.n(v),_=function(e){return Object(l.jsxs)("header",{className:g.a["main-header"],children:[Object(l.jsx)(b.b,{to:"/",children:Object(l.jsx)("h1",{children:"Product List"})}),Object(l.jsx)(m,{})]})},y=c(125),N=c(61),D=c.n(N),S=c(62),P=c.n(S),C=i.a.forwardRef((function(e,t){return Object(l.jsx)("input",{className:"".concat(P.a.checkbox," ").concat(e.className),type:"checkbox",ref:t,onChange:e.onChange,id:e.id})})),k={FURN:"Dimension",DVD:"Size",BOOK:"Weight"},w={FURN:"",DVD:"MB",BOOK:"KG"},V=function(e){var t=e.product,c=Object(r.useContext)(s),n=c.addProductToDelete,a=c.removeProductFromDelete,o=Object(r.useRef)(),i="".concat(k[t.type],": ").concat(t.prod_attribute).concat(w[t.type]);return Object(l.jsx)("div",{className:"card-columns",children:Object(l.jsxs)(y.a,{className:"".concat(D.a.card),children:[Object(l.jsx)(C,{className:"delete-checkbox",type:"checkbox",ref:o,onChange:function(){o.current.checked&&n(t.SKU),o.current.checked||a(t.SKU)}}),Object(l.jsxs)(y.a.Body,{children:[Object(l.jsx)(y.a.Text,{children:t.SKU}),Object(l.jsx)(y.a.Text,{children:t.name}),Object(l.jsxs)(y.a.Text,{children:[t.price," $"]}),Object(l.jsx)(y.a.Text,{children:i})]})]})})},I=c(63),T=c.n(I),F=function(){var e=Object(r.useContext)(s);return Object(r.useEffect)((function(){var t=f.a.CancelToken.source();return f.a.get("".concat("//localhost/products-app-scandiweb/api","/products"),{cancelToken:t.token}).then((function(t){e.addProducts(t.data)})).catch((function(e){f.a.isCancel(e)||console.log(e)})),function(){t.cancel()}}),[]),Object(l.jsx)("div",{className:"".concat(T.a["products-list"]),children:e.products.map((function(e){return Object(l.jsx)(V,{product:e},e.SKU)}))})},U=c(64),K=c.n(U),B=function(e){return Object(l.jsxs)("div",{className:K.a.control,children:[Object(l.jsx)("label",{htmlFor:e.id,children:e.label}),Object(l.jsx)("input",{pattern:e.pattern,type:e.type,id:e.id,value:e.value,onChange:e.onChange,title:"Please, provide the data of indicated type"})]})},E=c(65),A=c.n(E),H=function(e){return Object(l.jsx)("div",{className:"".concat(A.a.card," ").concat(e.className),children:e.children})},L=c(30),M=c.n(L),R=function(e){var t=e.checkIsValid,c=e.getState,n=Object(r.useState)(""),a=Object(o.a)(n,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){t(i.trim().length>0),c(i)}),[i,t,c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B,{onChange:function(e){s(e.target.value)},id:"size",type:"text",label:"Size (MB)",value:i,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("p",{children:"Please, provide size in MegaBytes!"})]})},$=function(e){var t=e.checkIsValid,c=e.getState,n=Object(r.useState)(""),a=Object(o.a)(n,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){t(i.trim().length>0),c(i)}),[i,t,c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B,{onChange:function(e){s(e.target.value)},id:"weight",type:"text",label:"Weight (KG)",value:i,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("p",{children:"Please, provide weight in kilograms!"})]})},W=c(6),z={height:"",width:"",length:"",heightIsValid:void 0,widthIsValid:void 0,lengthIsValid:void 0},G=function(e,t){switch(t.type){case"ADD_HEIGHT":return Object(W.a)(Object(W.a)({},e),{},{heightIsValid:t.val.trim().length>0,height:t.val});case"ADD_WIDTH":return Object(W.a)(Object(W.a)({},e),{},{widthIsValid:t.val.trim().length>0,width:t.val});case"ADD_LENGTH":return Object(W.a)(Object(W.a)({},e),{},{lengthIsValid:t.val.trim().length>0,length:t.val});default:return z}},q=function(e){var t=e.checkIsValid,c=e.getState,n=Object(r.useState)(!1),a=Object(o.a)(n,2),i=a[0],s=a[1],d=Object(r.useReducer)(G,z),u=Object(o.a)(d,2),j=u[0],b=u[1],h=function(e){var t="ADD_".concat(e.target.id.toUpperCase());b({type:t,val:e.target.value})},p=j.heightIsValid,O=j.widthIsValid,x=j.lengthIsValid;Object(r.useEffect)((function(){s(p&&O&&x)}),[p,O,x]);var f=j.height,m=j.width,v=j.length;return Object(r.useEffect)((function(){t(i),c("".concat(f,"x").concat(m,"x").concat(v))}),[i,t,c,f,m,v]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B,{id:"height",type:"text",label:"Height (CM)",onChange:h,value:j.height,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)(B,{id:"width",type:"text",label:"Width (CM)",onChange:h,value:j.width,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)(B,{id:"length",type:"text",label:"Length (CM)",onChange:h,value:j.length,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("p",{children:"Please, provide dimensions in HxWxL format!"})]})},J=c(124),Z=function(){var e=Object(r.useContext)(s),t=Object(r.useState)(!1),c=Object(o.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)(!1),d=Object(o.a)(i,2),u=d[0],b=d[1],h=Object(r.useState)(""),p=Object(o.a)(h,2),x=p[0],m=p[1],v=Object(r.useState)(""),g=Object(o.a)(v,2),_=g[0],y=g[1],N=Object(r.useState)(""),D=Object(o.a)(N,2),S=D[0],P=D[1],C=Object(r.useState)({comp:void 0,type:void 0}),k=Object(o.a)(C,2),w=k[0],V=k[1],I=Object(r.useState)(""),T=Object(o.a)(I,2),F=T[0],U=T[1],K=Object(r.useState)(!1),E=Object(o.a)(K,2),A=E[0],L=E[1],W=Object(r.useState)(!1),z=Object(o.a)(W,2),G=z[0],Z=z[1],Q=Object(O.f)();Object(r.useEffect)((function(){a(x.trim().length>0&&_.trim().length>0&&S.trim().length>0)}),[x,S,_]);var X=function(e){b(e)};return Object(l.jsxs)(H,{className:M.a["new-product"],children:[A&&Object(l.jsx)(J.a,{severity:"error",children:"Please, submit required data"}),Object(l.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),L(!n||!u),n&&u){Z(!0);var c={SKU:_,name:x,price:S,prod_attribute:F,type:w.type};e.addNewProduct(c),f.a.post("".concat("//localhost/products-app-scandiweb/api","/products"),c).then((function(e){Z(!1),Q.push("/")})).catch((function(e){return console.log(e)}))}},id:"product_form",children:[Object(l.jsx)(B,{type:"text",label:"SKU",id:"sku",onChange:function(e){y(e.target.value)},value:_,pattern:"[A-Z0-9]+"}),Object(l.jsx)(B,{type:"text",label:"Name",id:"name",onChange:function(e){m(e.target.value)},value:x,pattern:"^[A-Za-z0-9 _]+"}),Object(l.jsx)(B,{type:"text",label:"Price ($)",id:"price",onChange:function(e){P(e.target.value)},value:S,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("label",{htmlFor:"productType",children:"Type Switcher"}),Object(l.jsxs)("select",{onChange:function(e){switch(e.target.value){case"DVD":V({comp:Object(l.jsx)(R,{checkIsValid:X,getState:function(e){return U(e)}}),type:"DVD"});break;case"BOOK":V({comp:Object(l.jsx)($,{checkIsValid:X,getState:function(e){return U(e)}}),type:"BOOK"});break;case"FURN":V({comp:Object(l.jsx)(q,{checkIsValid:X,getState:function(e){return U(e)}}),type:"FURN"})}},id:"productType",className:M.a["type-select"],children:[Object(l.jsx)("option",{value:"",style:{display:"none"},children:"Product Type"}),Object(l.jsx)("option",{id:"Furniture",value:"FURN",children:"Furniture"}),Object(l.jsx)("option",{id:"DVD",value:"DVD",children:"DVD"}),Object(l.jsx)("option",{id:"Book",value:"BOOK",children:"Book"})]}),Object(l.jsx)("div",{className:"".concat(w.comp?M.a["product-type"]:""),children:w.comp}),Object(l.jsxs)("div",{className:M.a.actions,children:[Object(l.jsx)(j,{type:"submit",className:M.a["btn-add"],disabled:G,children:"Save"}),Object(l.jsx)(j,{type:"reset",onClick:function(){V({comp:void 0,type:void 0}),y(""),P(""),m(""),Q.push("/")},className:M.a["btn-cancel"],children:"Cancel"})]})]})]})},Q=c(20),X=function(e){var t=Object(r.useState)([]),c=Object(o.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)([]),d=Object(o.a)(i,2),u=d[0],j=d[1],b={products:u,listProdToDelete:n,addProductToDelete:function(e){a((function(t){return[].concat(Object(Q.a)(t),[e])}))},removeProductFromDelete:function(e){a((function(t){return t.filter((function(t){return t!==e}))}))},addProducts:function(e){j(e)},addNewProduct:function(e){j((function(t){return[].concat(Object(Q.a)(t),[e])}))},removeProducts:function(){var e=n;j((function(t){return t.filter((function(t){return!e.includes(t.SKU)}))})),a([])}};return Object(l.jsx)(s.Provider,{value:b,children:e.children})},Y=c(127),ee=c(66),te=c.n(ee),ce=function(){return Object(l.jsxs)("div",{className:te.a.footer,children:[Object(l.jsx)(Y.a,{variant:"middle"}),Object(l.jsx)("footer",{className:"mt-2",children:Object(l.jsx)("p",{className:"text-center",children:"ScandiWeb Test Assignment"})})]})};c(102);var ne=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b.a,{children:Object(l.jsxs)(X,{children:[Object(l.jsx)(_,{}),Object(l.jsx)("main",{children:Object(l.jsxs)(O.c,{children:[Object(l.jsx)(O.a,{exact:!0,component:F,path:"/"}),Object(l.jsx)(O.a,{exact:!0,component:Z,path:"/addproduct"})]})})]})}),Object(l.jsx)(ce,{})]})};a.a.render(Object(l.jsx)(ne,{}),document.getElementById("root"))},30:function(e,t,c){e.exports={"new-product":"NewProduct_new-product__2u2KF",actions:"NewProduct_actions__2fLrH","btn-add":"NewProduct_btn-add__3dA8G","btn-cancel":"NewProduct_btn-cancel__1bs6q","type-select":"NewProduct_type-select__2EhS5","product-type":"NewProduct_product-type___uAga"}},46:function(e,t,c){e.exports={nav:"Navigation_nav__cDp-f","delete-button":"Navigation_delete-button__2Zmax","delete-product-btn":"Navigation_delete-product-btn__27Q1a"}},58:function(e,t,c){e.exports={button:"Button_button__34BtI"}},60:function(e,t,c){e.exports={"main-header":"MainHeader_main-header__30fLk"}},61:function(e,t,c){e.exports={card:"Product_card__3HlOt"}},62:function(e,t,c){e.exports={checkbox:"Checkbox_checkbox__UqU8f"}},63:function(e,t,c){e.exports={"products-list":"ProductsList_products-list__2uJcU"}},64:function(e,t,c){e.exports={control:"Input_control__3D0Du",invalid:"Input_invalid__1ioQ7"}},65:function(e,t,c){e.exports={card:"Card_card__2-6ne"}},66:function(e,t,c){e.exports={footer:"Footer_footer__ye02a"}},73:function(e,t,c){}},[[103,1,2]]]);
//# sourceMappingURL=main.1ce0a3ae.chunk.js.map