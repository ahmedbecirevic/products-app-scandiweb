(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{103:function(e,t,c){"use strict";c.r(t);var n=c(57),a=c.n(n),o=(c(73),c(5)),r=c(0),i=c.n(r),s=i.a.createContext({products:[],listProdToDelete:[],deleteDisabled:function(e){},addProductToDelete:function(e){},removeProductFromDelete:function(e){},deleteProducts:function(){},addProducts:function(e){},addNewProduct:function(e){},removeProducts:function(){}}),d=c(58),u=c.n(d),l=c(1),j=function(e){return Object(l.jsx)("button",{onClick:e.onClick,className:"".concat(u.a.button," ").concat(e.className?e.className:""),id:e.id,disabled:e.disabled,type:e.type,children:e.children})},b=c(30),h=c(46),p=c.n(h),O=c(28),x=c.n(O),f=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),c=t[0],n=t[1],a="//localhost/products-app-scandiweb/api",i=Object(r.useContext)(s),d=i.listProdToDelete,u=i.removeProducts,h=Object(r.useCallback)((function(){if(d.length>0){var e={SKU:d};n(!0),u(),x.a.post("".concat(a,"/products/delete"),e).then((function(){n(!1)})).catch((function(e){return console.log(e)}))}}),[a,d,u]);return Object(l.jsx)("nav",{className:p.a.nav,children:Object(l.jsxs)("ul",{children:[Object(l.jsx)(b.b,{to:"/addproduct",children:Object(l.jsx)(j,{id:"add-product-btn",children:"ADD"})}),Object(l.jsx)(j,{id:"delete-product-btn",disabled:c,onClick:h,className:p.a["delete-product-btn"],children:"MASS DELETE"})]})})},v=c(60),m=c.n(v),g=function(e){return Object(l.jsxs)("header",{className:m.a["main-header"],children:[Object(l.jsx)(b.b,{to:"/",children:Object(l.jsx)("h1",{children:"Product List"})}),Object(l.jsx)(f,{})]})},_=c(125),y=c(61),N=c.n(y),D=c(62),S=c.n(D),P=i.a.forwardRef((function(e,t){return Object(l.jsx)("input",{className:"".concat(S.a.checkbox," ").concat(e.className),type:"checkbox",ref:t,onChange:e.onChange,id:e.id})})),C={FURN:"Dimension",DVD:"Size",BOOK:"Weight"},k={FURN:"",DVD:"MB",BOOK:"KG"},w=function(e){var t=e.product,c=Object(r.useContext)(s),n=c.addProductToDelete,a=c.removeProductFromDelete,o=Object(r.useRef)(),i="".concat(C[t.type],": ").concat(t.prod_attribute).concat(k[t.type]);return Object(l.jsx)("div",{className:"card-columns",children:Object(l.jsxs)(_.a,{className:"".concat(N.a.card),children:[Object(l.jsx)(P,{className:"delete-checkbox",type:"checkbox",ref:o,onChange:function(){o.current.checked&&n(t.SKU),o.current.checked||a(t.SKU)}}),Object(l.jsxs)(_.a.Body,{children:[Object(l.jsx)(_.a.Text,{children:t.SKU}),Object(l.jsx)(_.a.Text,{children:t.name}),Object(l.jsxs)(_.a.Text,{children:[t.price," $"]}),Object(l.jsx)(_.a.Text,{children:i})]})]})})},V=c(63),I=c.n(V),T=function(){var e=Object(r.useContext)(s);return Object(r.useEffect)((function(){var t=x.a.CancelToken.source();return x.a.get("".concat("//localhost/products-app-scandiweb/api","/products"),{cancelToken:t.token}).then((function(t){e.addProducts(t.data)})).catch((function(e){x.a.isCancel(e)||console.log(e)})),function(){t.cancel()}}),[]),Object(l.jsx)("div",{className:"".concat(I.a["products-list"]),children:e.products.map((function(e){return Object(l.jsx)(w,{product:e},e.SKU)}))})},F=c(7),U=c(64),K=c.n(U),B=function(e){return Object(l.jsxs)("div",{className:K.a.control,children:[Object(l.jsx)("label",{htmlFor:e.id,children:e.label}),Object(l.jsx)("input",{pattern:e.pattern,type:e.type,id:e.id,value:e.value,onChange:e.onChange,title:"Please, provide the data of indicated type"})]})},E=c(65),A=c.n(E),H=function(e){return Object(l.jsx)("div",{className:"".concat(A.a.card," ").concat(e.className),children:e.children})},L=c(29),M=c.n(L),R=function(e){var t=e.checkIsValid,c=e.getState,n=Object(r.useState)(""),a=Object(o.a)(n,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){t(i.trim().length>0),c(i)}),[i,t,c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B,{onChange:function(e){s(e.target.value)},id:"size",type:"text",label:"Size (MB)",value:i,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("p",{children:"Please, provide size in MegaBytes!"})]})},$=function(e){var t=e.checkIsValid,c=e.getState,n=Object(r.useState)(""),a=Object(o.a)(n,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){t(i.trim().length>0),c(i)}),[i,t,c]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B,{onChange:function(e){s(e.target.value)},id:"weight",type:"text",label:"Weight (KG)",value:i,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("p",{children:"Please, provide weight in kilograms!"})]})},W=c(6),z={height:"",width:"",length:"",heightIsValid:void 0,widthIsValid:void 0,lengthIsValid:void 0},G=function(e,t){switch(t.type){case"ADD_HEIGHT":return Object(W.a)(Object(W.a)({},e),{},{heightIsValid:t.val.trim().length>0,height:t.val});case"ADD_WIDTH":return Object(W.a)(Object(W.a)({},e),{},{widthIsValid:t.val.trim().length>0,width:t.val});case"ADD_LENGTH":return Object(W.a)(Object(W.a)({},e),{},{lengthIsValid:t.val.trim().length>0,length:t.val});default:return z}},q=function(e){var t=e.checkIsValid,c=e.getState,n=Object(r.useState)(!1),a=Object(o.a)(n,2),i=a[0],s=a[1],d=Object(r.useReducer)(G,z),u=Object(o.a)(d,2),j=u[0],b=u[1],h=function(e){var t="ADD_".concat(e.target.id.toUpperCase());b({type:t,val:e.target.value})},p=j.heightIsValid,O=j.widthIsValid,x=j.lengthIsValid;Object(r.useEffect)((function(){s(p&&O&&x)}),[p,O,x]);var f=j.height,v=j.width,m=j.length;return Object(r.useEffect)((function(){t(i),c("".concat(f,"x").concat(v,"x").concat(m))}),[i,t,c,f,v,m]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B,{id:"height",type:"text",label:"Height (CM)",onChange:h,value:j.height,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)(B,{id:"width",type:"text",label:"Width (CM)",onChange:h,value:j.width,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)(B,{id:"length",type:"text",label:"Length (CM)",onChange:h,value:j.length,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("p",{children:"Please, provide dimensions in HxWxL format!"})]})},J=c(124),Z=function(){var e=Object(r.useContext)(s),t=Object(r.useState)(!1),c=Object(o.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)(!1),d=Object(o.a)(i,2),u=d[0],b=d[1],h=Object(r.useState)(""),p=Object(o.a)(h,2),O=p[0],f=p[1],v=Object(r.useState)(""),m=Object(o.a)(v,2),g=m[0],_=m[1],y=Object(r.useState)(""),N=Object(o.a)(y,2),D=N[0],S=N[1],P=Object(r.useState)({comp:void 0,type:void 0}),C=Object(o.a)(P,2),k=C[0],w=C[1],V=Object(r.useState)(""),I=Object(o.a)(V,2),T=I[0],U=I[1],K=Object(r.useState)(!1),E=Object(o.a)(K,2),A=E[0],L=E[1],W=Object(r.useState)(!1),z=Object(o.a)(W,2),G=z[0],Z=z[1],Q=Object(F.f)();Object(r.useEffect)((function(){a(O.trim().length>0&&g.trim().length>0&&D.trim().length>0)}),[O,D,g]);var X=function(e){b(e)};return Object(l.jsxs)(H,{className:M.a["new-product"],children:[A&&Object(l.jsx)(J.a,{severity:"error",children:"Please, submit required data"}),Object(l.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),L(!n||!u),n&&u){Z(!0);var c={SKU:g,name:O,price:D,prod_attribute:T,type:k.type};e.addNewProduct(c),x.a.post("".concat("//localhost/products-app-scandiweb/api","/products"),c).then((function(e){Z(!1),Q.push("/")})).catch((function(e){return console.log(e)}))}},id:"product_form",children:[Object(l.jsx)(B,{type:"text",label:"SKU",id:"sku",onChange:function(e){_(e.target.value)},value:g,pattern:"[A-Z0-9]+"}),Object(l.jsx)(B,{type:"text",label:"Name",id:"name",onChange:function(e){f(e.target.value)},value:O,pattern:"^[A-Za-z0-9 _]+"}),Object(l.jsx)(B,{type:"text",label:"Price ($)",id:"price",onChange:function(e){S(e.target.value)},value:D,pattern:"([0-9]+\\.?[0-9]*|\\.[0-9]+)$"}),Object(l.jsx)("label",{htmlFor:"productType",children:"Type Switcher"}),Object(l.jsxs)("select",{onChange:function(e){switch(e.target.value){case"DVD":w({comp:Object(l.jsx)(R,{checkIsValid:X,getState:function(e){return U(e)}}),type:"DVD"});break;case"BOOK":w({comp:Object(l.jsx)($,{checkIsValid:X,getState:function(e){return U(e)}}),type:"BOOK"});break;case"FURN":w({comp:Object(l.jsx)(q,{checkIsValid:X,getState:function(e){return U(e)}}),type:"FURN"})}},id:"productType",className:M.a["type-select"],children:[Object(l.jsx)("option",{value:"",style:{display:"none"},children:"Product Type"}),Object(l.jsx)("option",{id:"Furniture",value:"FURN",children:"Furniture"}),Object(l.jsx)("option",{id:"DVD",value:"DVD",children:"DVD"}),Object(l.jsx)("option",{id:"Book",value:"BOOK",children:"Book"})]}),Object(l.jsx)("div",{className:"".concat(k.comp?M.a["product-type"]:""),children:k.comp}),Object(l.jsxs)("div",{className:M.a.actions,children:[Object(l.jsx)(j,{type:"submit",className:M.a["btn-add"],disabled:G,children:"Save"}),Object(l.jsx)(j,{type:"reset",onClick:function(){w({comp:void 0,type:void 0}),_(""),S(""),f(""),Q.push("/")},className:M.a["btn-cancel"],children:"Cancel"})]})]})]})},Q=c(20),X=function(e){var t=Object(r.useState)([]),c=Object(o.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)([]),d=Object(o.a)(i,2),u=d[0],j=d[1],b={products:u,listProdToDelete:n,addProductToDelete:function(e){a((function(t){return[].concat(Object(Q.a)(t),[e])}))},removeProductFromDelete:function(e){a((function(t){return t.filter((function(t){return t!==e}))}))},addProducts:function(e){j(e)},addNewProduct:function(e){j((function(t){return[].concat(Object(Q.a)(t),[e])}))},removeProducts:function(){var e=n;j((function(t){return t.filter((function(t){return!e.includes(t.SKU)}))})),a([])}};return Object(l.jsx)(s.Provider,{value:b,children:e.children})},Y=c(127),ee=c(66),te=c.n(ee),ce=function(){return Object(l.jsxs)("div",{className:te.a.footer,children:[Object(l.jsx)(Y.a,{variant:"middle"}),Object(l.jsx)("footer",{className:"mt-2",children:Object(l.jsx)("p",{className:"text-center",children:"ScandiWeb Test Assignment"})})]})};c(102);var ne=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(b.a,{children:Object(l.jsxs)(X,{children:[Object(l.jsx)(g,{}),Object(l.jsx)("main",{children:Object(l.jsxs)(F.c,{children:[Object(l.jsx)(F.a,{exact:!0,component:T,path:"/"}),Object(l.jsx)(F.a,{exact:!0,component:Z,path:"/addproduct"})]})})]})}),Object(l.jsx)(ce,{})]})};a.a.render(Object(l.jsx)(ne,{}),document.getElementById("root"))},29:function(e,t,c){e.exports={"new-product":"NewProduct_new-product__2u2KF",actions:"NewProduct_actions__2fLrH","btn-add":"NewProduct_btn-add__3dA8G","btn-cancel":"NewProduct_btn-cancel__1bs6q","type-select":"NewProduct_type-select__2EhS5","product-type":"NewProduct_product-type___uAga"}},46:function(e,t,c){e.exports={nav:"Navigation_nav__cDp-f","delete-button":"Navigation_delete-button__2Zmax","delete-product-btn":"Navigation_delete-product-btn__27Q1a"}},58:function(e,t,c){e.exports={button:"Button_button__34BtI"}},60:function(e,t,c){e.exports={"main-header":"MainHeader_main-header__30fLk"}},61:function(e,t,c){e.exports={card:"Product_card__3HlOt"}},62:function(e,t,c){e.exports={checkbox:"Checkbox_checkbox__UqU8f"}},63:function(e,t,c){e.exports={"products-list":"ProductsList_products-list__2uJcU"}},64:function(e,t,c){e.exports={control:"Input_control__3D0Du",invalid:"Input_invalid__1ioQ7"}},65:function(e,t,c){e.exports={card:"Card_card__2-6ne"}},66:function(e,t,c){e.exports={footer:"Footer_footer__ye02a"}},73:function(e,t,c){}},[[103,1,2]]]);
//# sourceMappingURL=main.61b5ca5f.chunk.js.map